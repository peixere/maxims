(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fb07c1be"],{"0a49":function(e,t,a){var o=a("9b43"),i=a("626a"),r=a("4bf8"),l=a("9def"),n=a("cd1c");e.exports=function(e,t){var a=1==e,s=2==e,c=3==e,u=4==e,d=6==e,h=5==e||d,p=t||n;return function(t,n,m){for(var f,g,b=r(t),v=i(b),y=o(n,m,3),w=l(v.length),k=0,x=a?p(t,w):s?p(t,0):void 0;w>k;k++)if((h||k in v)&&(f=v[k],g=y(f,k,b),e))if(a)x[k]=g;else if(g)switch(e){case 3:return!0;case 5:return f;case 6:return k;case 2:x.push(f)}else if(u)return!1;return d?-1:c||u?u:x}}},1169:function(e,t,a){var o=a("2d95");e.exports=Array.isArray||function(e){return"Array"==o(e)}},7514:function(e,t,a){"use strict";var o=a("5ca1"),i=a("0a49")(5),r="find",l=!0;r in[]&&Array(1)[r]((function(){l=!1})),o(o.P+o.F*l,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(r)},"9eb2":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"content-main"},[a("div",{staticClass:"toolbar"},[a("ri-button",{attrs:{right:"新增",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("新增菜单")]),a("ri-button",{attrs:{right:"删除",type:"danger",icon:"el-icon-delete",disabled:0===e.sels.length},on:{click:function(t){return e.handleBathDel()}}},[e._v("删除菜单")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"id",border:""},on:{"selection-change":e.handleSelectionChange}},[e._v(">\n      "),a("el-table-column",{attrs:{type:"selection",fixed:"",width:"40",align:"center"}}),a("el-table-column",{attrs:{type:"index",label:"序号",prop:"sort",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(a.sort)+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"name",label:"菜单标题",width:"170"}}),a("el-table-column",{attrs:{prop:"iconFile",label:"图标",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("i",{class:t.iconFile})]}}])}),a("el-table-column",{attrs:{prop:"category",label:"类型",formatter:function(t,a,o){return e.categoryNames[o]},width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"webPage",label:"路径","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"urlPatterns",label:"引用接口","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"disabled",label:"可见",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[o.disabled?a("el-tag",{attrs:{type:"danger"}},[e._v("隐藏")]):a("el-tag",{attrs:{type:"success"}},[e._v("可见")])]}}])}),a("el-table-column",{attrs:{prop:"created",label:"创建时间",align:"center",width:"160px"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return["DIR"===o.category?a("ri-button",{attrs:{right:"新增",type:"text",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd(o.id)}}},[e._v("新增")]):e._e(),"BTN"!==o.category?a("ri-button",{attrs:{right:"编辑",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit(o.id)}}},[e._v("编辑")]):e._e(),a("ri-button",{attrs:{right:"删除",type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDel(o.id)}}},[e._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dialogForm",attrs:{"label-width":"100px",model:e.dialogForm,rules:{sort:[{required:!0,message:"请填写",trigger:"blur"}],name:[{required:!0,message:"请填写",trigger:"blur"}],category:[{required:!0,message:"请选择",trigger:"blur"}],target:[{required:!0,message:"请选择",trigger:"blur"}],webPage:[{required:!0,message:"请填写",trigger:"blur"}]}}},[a("el-form-item",{attrs:{label:"序号",prop:"sort"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{oninput:"value=value.replace(/[^0-9.]/g,'')",placeholder:"序号"},model:{value:e.dialogForm.sort,callback:function(t){e.$set(e.dialogForm,"sort",t)},expression:"dialogForm.sort"}})],1),a("el-form-item",{attrs:{label:"上级菜单",prop:"parentId"}},[a("right-cascader",{ref:"rightCascader",staticStyle:{width:"90%"},attrs:{excludeValues:[e.dialogForm.id],excludeCategorys:["URL","BTN"]},model:{value:e.dialogForm.parentId,callback:function(t){e.$set(e.dialogForm,"parentId",t)},expression:"dialogForm.parentId"}})],1),a("el-form-item",{attrs:{label:"菜单标题",prop:"name"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"菜单标题"},model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),a("el-form-item",{attrs:{label:"菜单图标",prop:"iconFile"}},[a("icon-select",{staticStyle:{width:"90%"},model:{value:e.dialogForm.iconFile,callback:function(t){e.$set(e.dialogForm,"iconFile",t)},expression:"dialogForm.iconFile"}})],1),a("el-form-item",{attrs:{label:"菜单类型",prop:"category"}},[a("el-radio-group",{model:{value:e.dialogForm.category,callback:function(t){e.$set(e.dialogForm,"category",t)},expression:"dialogForm.category"}},[a("el-radio",{attrs:{label:"DIR"}},[e._v("目录")]),a("el-radio",{attrs:{label:"URL"}},[e._v("功能")])],1)],1),"URL"===e.dialogForm.category?a("div",[a("el-form-item",{attrs:{label:"功能类型",prop:"target"}},[a("el-radio-group",{model:{value:e.dialogForm.target,callback:function(t){e.$set(e.dialogForm,"target",t)},expression:"dialogForm.target"}},[a("el-radio",{attrs:{label:"COMPONENT"}},[e._v("新平台")]),a("el-radio",{attrs:{label:"OLD"}},[e._v("旧平台")]),a("el-radio",{attrs:{label:"IFRAME"}},[e._v("外链接")])],1)],1),"COMPONENT"===e.dialogForm.target?a("div",[a("el-form-item",{attrs:{label:"功能名称",prop:"webPage"}},[a("route-cascader",{staticStyle:{width:"90%"},on:{change:function(t){e.route=t}},model:{value:e.dialogForm.webPage,callback:function(t){e.$set(e.dialogForm,"webPage",t)},expression:"dialogForm.webPage"}})],1),e.route&&e.route.btns?a("el-form-item",{attrs:{label:"功能按钮"}},[a("el-checkbox-group",{model:{value:e.btnNames,callback:function(t){e.btnNames=t},expression:"btnNames"}},[e._l(e.route.btns,(function(e,t,o){return[a("el-checkbox",{key:o,attrs:{label:t}})]}))],2)],1):e._e()],1):e._e(),"OLD"===e.dialogForm.target?a("el-form-item",{attrs:{label:"路由地址",prop:"webPage"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"路由地址"},model:{value:e.dialogForm.webPage,callback:function(t){e.$set(e.dialogForm,"webPage",t)},expression:"dialogForm.webPage"}})],1):e._e(),"IFRAME"===e.dialogForm.target?a("el-form-item",{attrs:{label:"链接地址",prop:"webPage"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"链接地址"},model:{value:e.dialogForm.webPage,callback:function(t){e.$set(e.dialogForm,"webPage",t)},expression:"dialogForm.webPage"}})],1):e._e()],1):e._e(),a("el-form-item",{attrs:{label:"是否可见",prop:"disabled"}},[a("el-switch",{attrs:{"active-value":!1,"inactive-value":!0},model:{value:e.dialogForm.disabled,callback:function(t){e.$set(e.dialogForm,"disabled",t)},expression:"dialogForm.disabled"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确 定")])],1)],1)],1)},i=[],r=(a("ac6a"),a("7514"),a("7f7f"),a("cf7e")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-cascader",{attrs:{clearable:!0,options:e.options,"show-all-levels":!1,props:{label:"name",value:"id",children:"children",checkStrictly:!0,emitPath:!1}},on:{change:e.cascaderChange},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}})},n=[],s={components:{},name:"",props:{value:{required:!0},excludeValues:{type:Array},excludeCategorys:{type:Array}},data:function(){return{myValue:this.value,options:[],data:[]}},computed:{},created:function(){this.reload()},mounted:function(){},activated:function(){},beforeDestroy:function(){},watch:{value:function(){this.myValue=this.value},excludeValues:function(){this.loadOptions()},excludeCategorys:function(){this.loadOptions()}},methods:{reload:function(){var e=this;this.$api.right.menu().then((function(t){var a=t.data;1===a.length&&"平台权限"===a[0].name&&(a=a[0].children?a[0].children:[]),e.data=a,e.loadOptions()}))},loadOptions:function(){this.options=[],this.fillOptions(this.options,this.data)},fillOptions:function(e,t){var a=this;t.forEach((function(t){if(!(a.excludeValues&&a.excludeValues.indexOf(t.id)>-1)&&!(a.excludeCategorys&&a.excludeCategorys.indexOf(t.category)>-1)){var o=Object.assign({},t),i=[];t.children&&t.children.length>0&&a.fillOptions(i,t.children),o.children=i.length>0?i:void 0,e.push(o)}}))},cascaderChange:function(e){console.debug("cascaderChange",e),this.$emit("input",e)}}},c=s,u=a("2877"),d=Object(u["a"])(c,l,n,!1,null,"cca1f606",null),h=d.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-cascader",{attrs:{placeholder:e.placeholder,clearable:!0,options:e.options,"show-all-levels":!1,props:{label:"name",value:"path",children:"children",emitPath:!1}},on:{change:e.handleChange},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}})},m=[],f={components:{},name:"",props:["value","placeholder"],data:function(){return{options:[],myValue:this.value,routeDic:{}}},computed:{},created:function(){this.loadOptions(),this.value&&this.$emit("change",this.routeDic[this.value])},mounted:function(){},activated:function(){},beforeDestroy:function(){},watch:{value:function(){this.myValue=this.value,this.$emit("change",this.routeDic[this.value])}},methods:{loadOptions:function(){this.options=[];var e=this.$router.options.routes;this.fillOptions(this.options,e)},fillOptions:function(e,t){var a=this;t.forEach((function(t){if(!t.hidden){a.routeDic[t.path]=t;var o=Object.assign({},t),i=[];t.children&&t.children.length>0&&a.fillOptions(i,t.children),o.children=i.length>0?i:void 0,e.push(o)}}))},handleChange:function(e){this.$emit("input",e),this.$emit("change",this.routeDic[e])}}},g=f,b=Object(u["a"])(g,p,m,!1,null,null,null),v=b.exports,y={components:{RightCascader:h,IconSelect:r["a"],RouteCascader:v},name:"",props:[],data:function(){return{categoryNames:{DIR:"目录",URL:"功能",BTN:"按钮"},sels:[],tableData:[],funcName:"",dialogTitle:"",dialogVisible:!1,dialogForm:{},rootId:void 0,route:void 0,btnNames:[]}},computed:{},created:function(){this.loadTableData(),console.debug("btns",this.btns)},mounted:function(){},activated:function(){},beforeDestroy:function(){},watch:{"dialogForm.category":function(e){e&&!this.dialogForm.target&&this.$set(this.dialogForm,"target","COMPONENT")},dialogVisible:function(e){e&&this.$refs.rightCascader&&this.$refs.rightCascader.reload()}},methods:{loadTableData:function(){var e=this;this.$api.right.tree().then((function(t){if(t){var a=t.data;1===a.length&&"平台权限"===a[0].name&&(e.rootId=a[0].id,a=a[0].children?a[0].children:[]),e.tableData=a}}))},handleAdd:function(e){this.funcName="insert",this.dialogTitle="新增菜单",this.dialogForm={type:"WEB",parentId:e||this.rootId},this.btnNames=[],this.route=void 0,this.dialogVisible=!0},handleEdit:function(e){var t=this;this.funcName="update",this.$api.right.get(e).then((function(a){t.dialogTitle="编辑菜单",t.dialogForm=a.data,"URL"===t.dialogForm.category&&"COMPONENT"===t.dialogForm.target?t.$api.right.find({parentId:e}).then((function(e){var a=[];e.data.forEach((function(e){a.push(e.name)})),t.$set(t.$data,"btnNames",a),t.dialogVisible=!0})):t.dialogVisible=!0}))},handleSave:function(){var e=this;this.$refs.dialogForm.validate((function(t){if(!t)return!1;if(console.debug(e.dialogForm,e.route,e.btnNames),"COMPONENT"===e.dialogForm.target&&e.route){if(e.route.urls){var a=e.route.urls.join(",");e.dialogForm.urlPatterns=a}if(e.btnNames.length>0){var o=[];e.btnNames.forEach((function(t,a){var i=e.route.btns[t],r=i.join(",");o.push({sort:a+1,type:"WEB",category:"BTN",name:t,urlPatterns:r})})),e.dialogForm.children=o}}console.debug("dialogForm",e.dialogForm);var i=e.$api.right[e.funcName];i(e.dialogForm).then((function(){e.dialogVisible=!1,e.$message({type:"success",message:"保存成功！"}),e.loadTableData()}))}))},handleDel:function(e){var t=this;this.$confirm("确定删除菜单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$api.right.dele(e).then((function(){t.loadTableData()}))}))},handleBathDel:function(){var e=this;this.sels.length>0&&this.$confirm("确定删除选中的菜单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=[];e.sels.forEach((function(a){t.push(e.$api.right.dele(a.id))})),e.$api.all(t).then((function(){e.loadTableData()}))}))},handleSelectionChange:function(e){this.sels=e}}},w=y,k=Object(u["a"])(w,o,i,!1,null,"7eeefd08",null);t["default"]=k.exports},cd1c:function(e,t,a){var o=a("e853");e.exports=function(e,t){return new(o(e))(t)}},cf7e:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"inline-block"}},[a("el-input",{attrs:{"prefix-icon":this.text?"el-icon-fa fa-"+this.text:"",readonly:"",placeholder:"请选择图标"},on:{focus:e.handleFocus},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),a("el-dialog",{attrs:{visible:e.visible,width:"800px",modal:!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticStyle:{height:"45vh","overflow-y":"auto","background-color":"#333744",padding:"10px"}},[e._l(e.icons,(function(t,o){return[a("el-col",{key:o,attrs:{span:6}},[a("el-button",{staticStyle:{"font-size":"14px",color:"white"},attrs:{type:"text",icon:"el-icon-fa fa-"+t+" fa-fw"},on:{click:function(a){return e.handleSelect(t)}}},[e._v(e._s(t))])],1)]}))],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:e.handleClear}},[e._v("清除")]),a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")])],1)])],1)},i=[],r=(a("a481"),{components:{},name:"icon-select",props:{value:{type:String}},computed:{},created:function(){},mounted:function(){},activated:function(){},beforeDestroy:function(){},watch:{value:function(){this.text=this.value?this.value.replace("fa fa-",""):void 0}},methods:{handleFocus:function(){this.visible=!0},handleSelect:function(e){this.text=e,this.$emit("input","fa fa-"+e),this.visible=!1},handleClear:function(){this.text=void 0,this.$emit("input",void 0),this.visible=!1}},data:function(){return{visible:!1,text:this.value?this.value.replace("fa fa-",""):void 0,icons:["address-book","address-book-o","address-card","address-card-o","adjust","anchor","archive","area-chart","arrows","arrows-h","arrows-v","asl-interpreting","asterisk","at","audio-description","automobile","balance-scale","ban","bank","bar-chart","bar-chart-o","barcode","bars","bath","bathtub","battery","battery-0","battery-1","battery-2","battery-3","battery-4","battery-empty","battery-full","battery-half","battery-quarter","battery-three-quarters","bed","beer","bell","bell-o","bell-slash","bell-slash-o","bicycle","binoculars","birthday-cake","blind","bluetooth","bluetooth-b","bolt","bomb","book","bookmark","bookmark-o","braille","briefcase","bug","building","building-o","bullhorn","bullseye","bus","cab","calculator","calendar","calendar-check-o","calendar-minus-o","calendar-o","calendar-plus-o","calendar-times-o","camera","camera-retro","car","caret-square-o-down","caret-square-o-left","caret-square-o-right","caret-square-o-up","cart-arrow-down","cart-plus","cc","certificate","check","check-circle","check-circle-o","check-square","check-square-o","child","circle","circle-o","circle-o-notch","circle-thin","clock-o","clone","close","cloud","cloud-download","cloud-upload","code","code-fork","coffee","cog","cogs","comment","comment-o","commenting","commenting-o","comments","comments-o","compass","copyright","creative-commons","credit-card","credit-card-alt","crop","crosshairs","cube","cubes","cutlery","dashboard","database","deaf","deafness","desktop","diamond","dot-circle-o","download","drivers-license","drivers-license-o","edit","ellipsis-h","ellipsis-v","envelope","envelope-o","envelope-open","envelope-open-o","envelope-square","eraser","exchange","exclamation","exclamation-circle","exclamation-triangle","external-link","external-link-square","eye","eye-slash","eyedropper","fax","feed","female","fighter-jet","file-archive-o","file-audio-o","file-code-o","file-excel-o","file-image-o","file-movie-o","file-pdf-o","file-photo-o","file-picture-o","file-powerpoint-o","file-sound-o","file-video-o","file-word-o","file-zip-o","film","filter","fire","fire-extinguisher","flag","flag-checkered","flag-o","flash","flask","folder","folder-o","folder-open","folder-open-o","frown-o","futbol-o","gamepad","gavel","gear","gears","gift","glass","globe","graduation-cap","group","hand-grab-o","hand-lizard-o","hand-paper-o","hand-peace-o","hand-pointer-o","hand-rock-o","hand-scissors-o","hand-spock-o","hand-stop-o","handshake-o","hard-of-hearing","hashtag","hdd-o","headphones","heart","heart-o","heartbeat","history","home","hotel","hourglass","hourglass-1","hourglass-2","hourglass-3","hourglass-end","hourglass-half","hourglass-o","hourglass-start","i-cursor","id-badge","id-card","id-card-o","image","inbox","industry","info","info-circle","institution","key","keyboard-o","language","laptop","leaf","legal","lemon-o","level-down","level-up","life-bouy","life-buoy","life-ring","life-saver","lightbulb-o","line-chart","location-arrow","lock","low-vision","magic","magnet","mail-forward","mail-reply","mail-reply-all","male","map","map-marker","map-o","map-pin","map-signs","meh-o","microchip","microphone","microphone-slash","minus","minus-circle","minus-square","minus-square-o","mobile","mobile-phone","money","moon-o","mortar-board","motorcycle","mouse-pointer","music","navicon","newspaper-o","object-group","object-ungroup","paint-brush","paper-plane","paper-plane-o","paw","pencil","pencil-square","pencil-square-o","percent","phone","phone-square","photo","picture-o","pie-chart","plane","plug","plus","plus-circle","plus-square","plus-square-o","podcast","power-off","print","puzzle-piece","qrcode","question","question-circle","question-circle-o","quote-left","quote-right","random","recycle","refresh","registered","remove","reorder","reply","reply-all","retweet","road","rocket","rss","rss-square","s15","search","search-minus","search-plus","send","send-o","server","share","share-alt","share-alt-square","share-square","share-square-o","shield","ship","shopping-bag","shopping-basket","shopping-cart","shower","sign-in","sign-language","sign-out","signal","signing","sitemap","sliders","smile-o","snowflake-o","soccer-ball-o","sort","sort-alpha-asc","sort-alpha-desc","sort-amount-asc","sort-amount-desc","sort-asc","sort-desc","sort-down","sort-numeric-asc","sort-numeric-desc","sort-up","space-shuttle","spinner","spoon","square","square-o","star","star-half","star-half-empty","star-half-full","star-half-o","star-o","sticky-note","sticky-note-o","street-view","suitcase","sun-o","support","tablet","tachometer","tag","tags","tasks","taxi","television","terminal","thermometer","thermometer-0","thermometer-1","thermometer-2","thermometer-3","thermometer-4","thumb-tack","thumbs-down","thumbs-o-down","thumbs-o-up","thumbs-up","ticket","times","times-circle","times-circle-o","times-rectangle","times-rectangle-o","tint","toggle-down","toggle-left","toggle-off","toggle-on","toggle-right","toggle-up","trademark","trash","trash-o","tree","trophy","truck","tty","tv","umbrella","universal-access","university","unlock","unlock-alt","unsorted","upload","user","user-circle","user-circle-o","user-o","user-plus","user-secret","user-times","users","vcard","vcard-o","video-camera","volume-control-phone","volume-down","volume-off","volume-up","warning","wheelchair","wheelchair-alt","wifi","window-close","window-close-o","window-maximize","window-minimize","window-restore","wrench","align-center","align-justify","align-left","align-right","bold","chain","chain-broken","clipboard","columns","copy","cut","dedent","eraser","file","file-o","file-text","file-text-o","files-o","floppy-o","font","header","indent","italic","link","list","list-alt","list-ol","list-ul","outdent","paperclip","paragraph","paste","repeat","rotate-left","rotate-right","save","scissors","strikethrough","subscript","superscript","table","text-height","text-width","th","th-large","th-list","underline","undo","unlink","etsy"]}}}),l=r,n=a("2877"),s=Object(n["a"])(l,o,i,!1,null,null,null);t["a"]=s.exports},e853:function(e,t,a){var o=a("d3f4"),i=a("1169"),r=a("2b4c")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),o(t)&&(t=t[r],null===t&&(t=void 0))),void 0===t?Array:t}}}]);