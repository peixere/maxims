(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0af060"],{"0d0f":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content is-vertical",attrs:{id:"login_log"}},[a("div",{staticClass:"content-main"},[a("div",{attrs:{id:"login-log-form"}},[a("el-form",{attrs:{inline:!0,"label-position":"right"}},[a("el-form-item",{attrs:{label:"登录用户"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入"},model:{value:e.searchForm.updater,callback:function(t){e.$set(e.searchForm,"updater",t)},expression:"searchForm.updater"}})],1),a("el-form-item",{attrs:{label:"是否成功"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.searchForm.success,callback:function(t){e.$set(e.searchForm,"success",t)},expression:"searchForm.success"}},e._l(e.optionsSuccess,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd hh:mm:ss",type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.loginLogTime,callback:function(t){e.loginLogTime=t},expression:"loginLogTime"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜 索")])],1)],1),a("div",{staticClass:"toolbar"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-document-delete"},on:{click:e.handleToExcel}},[e._v("导 出")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:e.sels.length<1},on:{click:e.batchDelete}},[e._v("批量删除")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{id:"loginLogTable",data:e.tableData,border:""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",fixed:"",width:"45px",align:"center"}}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"45px",align:"center"}}),a("el-table-column",{attrs:{property:"updater",label:"登录用户",fit:""}}),a("el-table-column",{attrs:{property:"platform",label:"对应平台",width:"150px"}}),a("el-table-column",{attrs:{property:"success",label:"是否成功",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.success?"success":"danger","disable-transitions":""}},[t.row.success?a("label",[e._v("成功")]):a("label",[e._v("失败")])])]}}])}),a("el-table-column",{attrs:{property:"updated",label:"时间",width:"150px",align:"center"}}),a("el-table-column",{attrs:{property:"osName",label:"系统名称",width:"150px"}}),a("el-table-column",{attrs:{property:"memo",label:"登录信息",width:"250px"}}),a("el-table-column",{attrs:{property:"",label:"操作",fixed:"right",width:"130px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"table-btn",attrs:{type:"text",icon:"el-icon-document"},on:{click:function(a){return e.handleTenantDetail(t.row)}}},[e._v("详细")])]}}])})],1),a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,30,50,100],"page-size":e.searchForm.page.size,total:e.searchForm.page.total},on:{"current-change":e.pageChange,"size-change":e.handleSizeChange}})],1),a("el-dialog",{attrs:{title:"登录日志的详细信息",visible:e.dialogDetail,width:"500px",top:"3vh"},on:{"update:visible":function(t){e.dialogDetail=t}}},[e.dialogDetail?a("div",[a("el-form",{attrs:{"label-width":"150px",model:e.detailOptions}},[a("el-form-item",{attrs:{label:"登录用户:"}},[a("label",[e._v(e._s(e.detailOptions.updater))])]),a("el-form-item",{attrs:{label:"是否成功:"}},[[a("el-tag",{attrs:{type:e.detailOptions.success?"success":"danger","disable-transitions":""}},[e.detailOptions.success?a("label",[e._v("成功")]):a("label",[e._v("失败")])])]],2),a("el-form-item",{attrs:{label:"操作时间:"}},[a("label",[e._v(e._s(e.detailOptions.updated))])]),a("el-form-item",{attrs:{label:"请求 IP:"}},[a("label",[e._v(e._s(e.detailOptions.addressIp))])]),a("el-form-item",{attrs:{label:"是否用手机:"}},[e.detailOptions.mobile?a("label",[e._v("是")]):a("label",[e._v("不是")])]),a("el-form-item",{attrs:{label:"使用设备:"}},[a("label",[e._v(e._s(e.detailOptions.deviceInfo))])]),a("el-form-item",{attrs:{label:"系统名称:"}},[a("label",[e._v(e._s(e.detailOptions.osName))])]),a("el-form-item",{attrs:{label:"对应平台:"}},[a("label",[e._v(e._s(e.detailOptions.platform))])]),a("el-form-item",{attrs:{label:"浏览器:"}},[a("label",[e._v(e._s(e.detailOptions.browserName))])]),a("el-form-item",{attrs:{label:"备注:"}},[a("label",[e._v(e._s(e.detailOptions.memo))])])],1)],1):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogDetail=!1}}},[e._v("返 回")])],1)])],1)},i=[],s={components:{},data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},optionsSuccess:[{value:!1,label:"失败"},{value:!0,label:"成功"}],sels:[],title:"登录日志",dialogDetail:!1,tableData:[],detailOptions:{},loginLogTime:[],searchForm:{updater:"",page:{number:1,size:10,total:0,startTime:"",endTime:""}}}},created:function(){this.pageChange(1)},watch:{},methods:{pageChange:function(e){var t=this;e&&(this.searchForm.page.number=e),this.$api.loginLog.findLoginPage(this.searchForm).then((function(e){t.tableData=e.data,t.searchForm.page.total=e.page.total}))},handleSizeChange:function(e){var t=this;this.searchForm.page.size=e,this.$api.loginLog.findLoginPage(this.searchForm).then((function(e){t.tableData=e.data,t.searchForm.page.total=e.page.total}))},handleTenantDetail:function(e){var t=this;this.$api.loginLog.findLoginDetail(e.id).then((function(e){t.detailOptions=e.data,t.dialogDetail=!0}))},handleSearch:function(){null!=this.loginLogTime&&this.loginLogTime.length?(this.searchForm.page.startTime=this.loginLogTime[0],this.searchForm.page.endTime=this.loginLogTime[1]):(this.searchForm.page.startTime="",this.searchForm.page.endTime=""),this.pageChange(1)},handleToExcel:function(){this.$util.exportExcel("loginLogTable","登陆日志")},batchDelete:function(){for(var e=this,t=[],a=0;a<this.sels.length;a++)t[a]=this.sels[a].id;this.$api.loginLog.deleteByIds(t).then((function(t){200==t.status&&(e.$message({message:"操作成功！",type:"success"}),e.pageChange(1))}))},selsChange:function(e){return this.sels=e,!0}}},o=s,n=a("2877"),r=Object(n["a"])(o,l,i,!1,null,"0d535b2d",null);t["default"]=r.exports}}]);