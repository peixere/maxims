
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">
<title>用户登录</title>
<script src="static/dist/js/jquery-3.6.0.min.js"></script>
<script src="static/dist/js/jquery.form.js"></script>
<link href="static/dist/bootstrap/css/bootstrap.min.css" rel="stylesheet">
<link href="static/dist/css/signin.css" rel="stylesheet" />
<script type="text/javascript">
	$(document).ready(function() {
		var options = {
			beforeSubmit : submitCallback, // pre-submit callback
			success : successCallback, // post-submit callback
			error : errorCallback,
			dataType : "json"
		// other available options:
		//url:       url         // override for form's 'action' attribute
		//type:      type        // 'get' or 'post', override for form's 'method' attribute
		//dataType:  null        // 'xml', 'script', or 'json' (expected server response type)
		//clearForm: true        // clear all form fields after successful submit
		//resetForm: true        // reset the form after successful submit

		// $.ajax options can be used here too, for example:
		//timeout:   3000
		};
		$('#form-signin').submit(function() {
			$(this).ajaxSubmit(options);
			return false;
		});
	});

	function submitCallback(formData, jqForm, options) {
		var queryString = $.param(formData);
		console.log(queryString);
		return true;
	}

	function successCallback(responseText, statusText, xhr, $form) {
		location.href = '/';
	}

	function errorCallback(error, statusText, xhr, $form) {
		console.log(error.responseJSON.error);
		$("#loginError").html(error.responseJSON.message);
		$("#loginError").css('display', 'block');
		//alert(error.responseJson.message);
	}
</script>
</head>
<body>
	<div class="container">
		<form class="form-signin" id="form-signin" method="post" action="/login">
			<h2 class="form-signin-heading">用户登录</h2>
			<div id="loginError" style="display: none" class="alert alert-danger" role="alert"></div>
			<div th:if="${loginError}" th:text="${loginError}" class="alert alert-danger" role="alert"></div>
			<p>
				<label for="username" class="sr-only">用户帐号</label>
				<input type="text" id="username" name="username" value="admin" class="form-control" placeholder="Username" required
					autofocus>
			</p>
			<p>
				<label for="password" class="sr-only">用户密码</label>
				<input type="password" id="password" name="password" value="naste123456" class="form-control" placeholder="Password"
					required>
			</p>
			<p>
				<label for="password" class="sr-only">记住登录</label>
				
				<input type="hidden" id="platform" name="platform" value="WEB">
				<input type="checkbox" id="rememberMe" name="rememberMe" alt="记住登录">
				记住登录
				</input>
				&nbsp;&nbsp;&nbsp;&nbsp;
				<a href="/none/forget-password.html">忘记密码</a>
				&nbsp;&nbsp;&nbsp;&nbsp;
				<a href="/none/register.html">注册帐号</a>
			</p>
			<button class="btn btn-lg btn-primary btn-block" type="submit">登录</button>
		</form>
	</div>
</body>
</html>